<?xml version="1.0" encoding="UTF-8" ?>
<!--  
    For information on how to customize this file, please see
    http://wiki.apache.org/solr/SolrConfigXml. The page also has a link to 
    an extensively commented version of this file. 
-->
<config>

  <luceneMatchVersion>6.0</luceneMatchVersion>
  <abortOnConfigurationError>${solr.abortOnConfigurationError:true}</abortOnConfigurationError>

  <schemaFactory class="ClassicIndexSchemaFactory"/>

  <lib dir="/cul/data/solr/instancelibs/bl2/"/>

  <dataDir>${solr.data.dir:}</dataDir>

  <indexConfig>

    <mergePolicyFactory class="org.apache.solr.index.TieredMergePolicyFactory">
      <int name="maxMergeAtOnce">10</int>
      <int name="segmentsPerTier">10</int>
    </mergePolicyFactory>
    <mergedSegmentWarmer class="org.apache.lucene.index.SimpleMergedSegmentWarmer"/>

  </indexConfig>

  <updateHandler class="solr.DirectUpdateHandler2" >

    <updateLog>
      <str name="dir">${solr.data.dir:}</str>
    </updateLog>  

     <autoCommit> 
       <maxTime>600000</maxTime> <!--  10 minutes -->
       <openSearcher>false</openSearcher> 
     </autoCommit>

	 <autoSoftCommit> 
       <maxTime>1000</maxTime> <!-- 1 second -->
     </autoSoftCommit>

  </updateHandler>


  <!-- query time configurations -->
  <query>
    <maxBooleanClauses>1024</maxBooleanClauses>
    <filterCache class="solr.FastLRUCache"
        size="512" initialSize="512" autowarmCount="128"/>
    <queryResultCache class="solr.LRUCache"
        size="512" initialSize="512" autowarmCount="32"/>
    <documentCache class="solr.LRUCache"
        size="512" initialSize="512" autowarmCount="0"/>
    <enableLazyFieldLoading>true</enableLazyFieldLoading>
    <queryResultWindowSize>50</queryResultWindowSize>
    <queryResultMaxDocsCached>200</queryResultMaxDocsCached>
    <HashDocSet maxSize="3000" loadFactor="0.75"/>

    <!-- a newSearcher event is fired whenever a new searcher is being prepared
      and there is a current searcher handling requests (aka registered).
      It can be used to prime certain caches to prevent long request times for
      certain requests.
    -->
    <!-- QuerySenderListener takes an array of NamedList and executes a
         local query request for each NamedList in sequence. -->
    <listener event="newSearcher" class="solr.QuerySenderListener">
      <arr name="queries">
        <!-- query for all objects (default query) for home page facets -->
        <lst>
          <str name="rows">0</str> 
          <str name="fl">score</str>
          <str name="facet">true</str>
          <str name="facet.mincount">1</str>
          <str name="facet.limit">10</str>
          <str name="facet.field">format</str>
          <str name="facet.field">online</str>
          <str name="facet.field">lc_callnum_facet</str>
          <str name="f.lc_callnum_facet.facet.sort">false</str>
          <str name="facet.field">language_facet</str>
          <str name="facet.field">location_facet</str>
          <str name="facet.field">pub_date_facet</str>
          <str name="facet.field">author_facet</str>
          <str name="facet.field">fast_era_facet</str>
          <str name="facet.field">fast_geo_facet</str>
          <str name="facet.field">fast_genre_facet</str>
          <str name="facet.field">fast_topic_facet</str>
          <str name="facet.field">subject_content_facet</str>
        </lst>
        <!-- query for single document to populate filter cache -->
        <lst>
          <str name="q">id:00282214</str>
          <str name="qt">standard</str>
          <str name="rows">0</str>
          <str name="fl">score</str>
          <str name="facet">true</str>
          <str name="facet.mincount">1</str>
          <str name="facet.limit">10</str>
          <str name="facet.field">format</str>
          <str name="facet.field">online</str>
          <str name="facet.field">lc_callnum_facet</str>
          <str name="f.lc_callnum_facet.facet.sort">false</str>
          <str name="facet.field">language_facet</str>
          <str name="facet.field">location_facet</str>
          <str name="facet.field">pub_date_facet</str>
          <str name="facet.field">author_facet</str>
          <str name="facet.field">fast_era_facet</str>
          <str name="facet.field">fast_geo_facet</str>
          <str name="facet.field">fast_genre_facet</str>
          <str name="facet.field">fast_topic_facet</str>
          <str name="facet.field">subject_content_facet</str>
        </lst>
      </arr>
    </listener>

    <!-- a firstSearcher event is fired whenever a new searcher is being
         prepared but there is no current registered searcher to handle
         requests or to gain autowarming data from. -->
    <listener event="firstSearcher" class="solr.QuerySenderListener">
      <arr name="queries">
        <!-- query for all objects (default query) for home page facets -->
        <lst>
          <str name="rows">0</str> 
          <str name="fl">score</str>
          <str name="facet">true</str>
          <str name="facet.mincount">1</str>
          <str name="facet.limit">10</str>
          <str name="facet.field">format</str>
          <str name="facet.field">online</str>
          <str name="facet.field">lc_callnum_facet</str>
          <str name="f.lc_callnum_facet.facet.sort">false</str>
          <str name="facet.field">language_facet</str>
          <str name="facet.field">location_facet</str>
          <str name="facet.field">pub_date_facet</str>
          <str name="facet.field">author_facet</str>
          <str name="facet.field">fast_era_facet</str>
          <str name="facet.field">fast_geo_facet</str>
          <str name="facet.field">fast_genre_facet</str>
          <str name="facet.field">fast_topic_facet</str>
          <str name="facet.field">subject_content_facet</str>
        </lst>
        <!-- query for single document to populate filter cache -->
        <lst>
          <str name="q">id:00282214</str>
          <str name="qt">standard</str>
          <str name="rows">0</str>
          <str name="fl">score</str>
          <str name="facet">true</str>
          <str name="facet.mincount">1</str>
          <str name="facet.limit">10</str>
          <str name="facet.field">format</str>
          <str name="facet.field">online</str>
          <str name="facet.field">lc_callnum_facet</str>
          <str name="f.lc_callnum_facet.facet.sort">false</str>
          <str name="facet.field">language_facet</str>
          <str name="facet.field">location_facet</str>
          <str name="facet.field">pub_date_facet</str>
          <str name="facet.field">author_facet</str>
          <str name="facet.field">fast_era_facet</str>
          <str name="facet.field">fast_geo_facet</str>
          <str name="facet.field">fast_genre_facet</str>
          <str name="facet.field">fast_topic_facet</str>
          <str name="facet.field">subject_content_facet</str>
        </lst>
      </arr>
    </listener>

    <useColdSearcher>false</useColdSearcher>
    <maxWarmingSearchers>2</maxWarmingSearchers>
  </query>

  <requestDispatcher handleSelect="true" >
    <requestParsers enableRemoteStreaming="false" multipartUploadLimitInKB="2048" />
    <httpCaching lastModifiedFrom="openTime" etagSeed="Solr" />
  </requestDispatcher>

  <!-- blacklight does not use the standard request handler -->
  <requestHandler name="standard" class="solr.SearchHandler">
    <lst name="defaults">
      <str name="echoParams">all</str>
      <str name="q.op">AND</str>
    </lst>
  </requestHandler>

  <requestHandler name="/analysis/field" class="solr.FieldAnalysisRequestHandler" />
  
  <!-- search handlers to support database ERM interface -->
  <requestHandler name="/databases" class="solr.SearchHandler">
    <lst name="defaults">
      <str name="defType">dismax</str>
      <str name="echoParams">explicit</str>
      <str name="fl">id,fulltitle_display,title_display,subtitle_display,fulltitle_vern_display,summary_display,sixfivethree,url_access_display,url_access_json,dbcode,providercode</str>
      <str name="sort">score desc</str>
      <str name="rows">20</str>
      <str name="wt">ruby</str>
      <str name="q">*</str>
      <str name="q.alt">*</str>
      <str name="facet.mincount">1</str>
      <str name="mm">100%</str>
      <str name="q.op">OR</str>
      <str name="qf">
        title_unstemC^25000        title_unstemP^25000
        title_startsCJK^2500
        title_t^12500              title_tP^12500             title_t_cjk^2500
        title_uniform_unstemC^2500 title_uniform_unstemP^2500
        title_uniform_t^1250       title_uniform_tP^1250      title_uniform_t_cjk^250
        title_addl_unstemC^2500    title_addl_unstemP^2500
        title_addl_t^1250          title_addl_tP^1250         title_addl_t_cjk^250
        subject_unstemC^375        subject_unstemP^375
        subject_t^250              subject_tP^250             subject_t_cjk^50
        author_unstemC^125         author_unstemP^125
        author_t^50                author_tP^50               author_t_cjk^10
        author_addl_unstemC^75     author_addl_unstemP^75
        author_addl_t^25           author_addl_tP^25          author_addl_t_cjk^5
        lc_callnum_full^100
        publisher_unstemC^75       publisher_unstemP^75
        publisher_t^50             publisher_tP^50            publisher_t_cjk^10
        pub_date_facet^25
        pub_date_t^25              pub_date_tP^25             pub_date_t_cjk^5
        subject_addl_unstemC^125   subject_addl_unstemP^125
        subject_addl_t^25          subject_addl_tP^25         subject_addl_t_cjk^5
        title_series_unstemC^25    title_series_unstemP^25
        title_series_t^5           title_series_t^5           title_series_t_cjk
        isbn_t                     isbn_tP                    isbn_t_cjk
        issn_t                     issn_tP                    issn_t_cjk
        donor_s
        donor_t                    donor_tP                   donor_t_cjk
        pubplace_t                 pubplace_tP                pubplace_t_cjk
        eightninenine_t            eightninenine_tP           eightninenine_t_cjk
        notes_t                    notes_tP                   notes_t_cjk
        summary_t                  summary_tP                 summary_t_cjk
        toc_t                      toc_tP                     toc_t_cjk
        author_245c_t              author_245c_tP             author_245c_t_cjk
        barcode_t^10               barcode_tP^10
        barcode_addl_t             barcode_addl_tP
        language_articles_t
        authority_author_t         authority_author_tP        authority_author_t_cjk
        authority_subject_t        authority_subject_tP       authority_subject_t_cjk
      </str>
      <str name="pf">
        title_t^12500              title_tP^12500             title_t_cjk^2500
        title_exact^2500           title_main_exact^1250
        title_uniform_t^1250       title_uniform_tP^1250      title_uniform_t_cjk^250
        title_addl_t^1250          title_addl_tP^1250         title_addl_t_cjk^250
        subject_t^250              subject_tP^250             subject_t_cjk^50
        author_t^50                author_tP^50               author_t_cjk^10
        author_addl_t^25           author_addl_tP^25          author_addl_t_cjk^5
        lc_callnum_full^100
        publisher_t^50             publisher_tP^50            publisher_t_cjk^10
        pub_date_facet^25
        pub_date_t^25              pub_date_tP^25             pub_date_t_cjk^5
        subject_addl_t^25          subject_addl_tP^25         subject_addl_t_cjk^5
        title_series_t^5           title_series_t^5           title_series_t_cjk
        isbn_t                     isbn_tP                    isbn_t_cjk
        issn_t                     issn_tP                    issn_t_cjk
        donor_s
        donor_t                    donor_tP                   donor_t_cjk
        pubplace_t                 pubplace_tP                pubplace_t_cjk
        eightninenine_t            eightninenine_tP           eightninenine_t_cjk
        notes_t                    notes_tP                   notes_t_cjk
        summary_t                  summary_tP                 summary_t_cjk
        toc_t                      toc_tP                     toc_t_cjk
        author_245c_t              author_245c_tP             author_245c_t_cjk
        barcode_t^10               barcode_tP^10
        barcode_addl_t             barcode_addl_tP
        language_articles_t
        authority_author_t         authority_author_tP        authority_author_t_cjk
        authority_subject_t        authority_subject_tP       authority_subject_t_cjk
      </str>
    </lst>
    <lst name="appends">
      <str name="fq">database_b:true</str>
    </lst>
  </requestHandler>
  <requestHandler name="/database" class="solr.SearchHandler">
    <lst name="defaults">
      <str name="defType">lucene</str>
      <str name="echoParams">explicit</str>
      <str name="fl">id,fulltitle_display,title_display,subtitle_display,fulltitle_vern_display,summary_display,sixfivethree,url_access_display,url_access_json,title_other_display,dbcode,providercode</str>
      <str name="df">id</str>
      <str name="rows">1</str>
      <str name="wt">ruby</str>
      <str name="q">{!raw f=id v=$id}</str>
      <str name="q.alt">*</str>
      <str name="facet.mincount">1</str>
    </lst>
    <lst name="appends">
      <str name="fq">database_b:true</str>
    </lst>
  </requestHandler>
  <requestHandler name="/termsOfUse" class="solr.SearchHandler">
    <lst name="defaults">
      <str name="defType">lucene</str>
      <str name="echoParams">explicit</str>
      <str name="fl">id,fulltitle_display,title_display,subtitle_display,fulltitle_vern_display,summary_display,sixfivethree,url_access_display,url_access_json,title_other_display,dbcode,providercode</str>
      <str name="df">id</str>
      <str name="rows">1</str>
      <str name="wt">ruby</str>
      <str name="q">{!raw f=id v=$id}</str>
      <str name="q.alt">*</str>
      <str name="facet.mincount">1</str>
    </lst>
  </requestHandler>
  <requestHandler name="/databasesBySubject" class="solr.SearchHandler">
    <lst name="defaults">
      <str name="defType">lucene</str>
      <str name="echoParams">explicit</str>
      <str name="fl">id,fulltitle_display,title_display,subtitle_display,fulltitle_vern_display,summary_display,sixfivethree,url_access_display,url_access_json,dbcode,providercode</str>
      <str name="df">sixfivethree</str>
      <str name="sort">title_sort asc</str>
      <str name="rows">1000000</str>
      <str name="wt">ruby</str>
      <str name="q">*</str>
      <str name="q.alt">*</str>
      <str name="facet.mincount">1</str>
    </lst>
    <lst name="appends">
      <str name="fq">database_b:true</str>
    </lst>
  </requestHandler>
  <requestHandler name="/databaseAlphaBuckets" class="solr.SearchHandler">
    <lst name="defaults">
      <str name="defType">lucene</str>
      <str name="echoParams">explicit</str>
      <str name="fl">id,fulltitle_display,title_display,subtitle_display,fulltitle_vern_display,summary_display,sixfivethree,url_access_display,url_access_json,dbcode,providercode</str>
      <str name="df">title_1letter_s</str>
      <str name="sort">title_sort asc</str>
      <str name="rows">1000000</str>
      <str name="wt">ruby</str>
      <str name="q">*</str>
      <str name="q.alt">*</str>
      <str name="facet.mincount">1</str>
      <str name="facet.field">title_1letter_s</str>
      <str name="facet.sort">index</str>
    </lst>
    <lst name="appends">
      <str name="fq">database_b:true</str>
    </lst>
  </requestHandler>
  
  <requestHandler name="/culdigreg" class="solr.SearchHandler">
    <lst name="defaults">
      <str name="fl">id,fulltitle_display,author_display,pub_info_display,fulltitle_vern_display,
                     summary_display,url_access_display,url_access_json</str>
      <str name="rows">5000</str>
      <str name="wt">ruby</str>
      <str name="indent">true</str>
      <str name="sort">title_sort asc</str>
      <str name="defType">edismax</str>
      <str name="echoParams">explicit</str>
      <str name="mm">100%</str>
      <str name="q">*</str>
      <str name="qf">
        title_unstemC^25000        title_unstemP^25000
        title_startsCJK^2500
        title_t^12500              title_tP^12500             title_t_cjk^2500
        title_uniform_unstemC^2500 title_uniform_unstemP^2500
        title_uniform_t^1250       title_uniform_tP^1250      title_uniform_t_cjk^250
        title_addl_unstemC^2500    title_addl_unstemP^2500
        title_addl_t^1250          title_addl_tP^1250         title_addl_t_cjk^250
        subject_unstemC^375        subject_unstemP^375
        subject_t^250              subject_tP^250             subject_t_cjk^50
        author_unstemC^125         author_unstemP^125
        author_t^50                author_tP^50               author_t_cjk^10
        author_addl_unstemC^75     author_addl_unstemP^75
        author_addl_t^25           author_addl_tP^25          author_addl_t_cjk^5
        lc_callnum_full^100
        publisher_unstemC^75       publisher_unstemP^75
        publisher_t^50             publisher_tP^50            publisher_t_cjk^10
        pub_date_facet^25
        pub_date_t^25              pub_date_tP^25             pub_date_t_cjk^5
        subject_addl_unstemC^125   subject_addl_unstemP^125
        subject_addl_t^25          subject_addl_tP^25         subject_addl_t_cjk^5
        title_series_unstemC^25    title_series_unstemP^25
        title_series_t^5           title_series_t^5           title_series_t_cjk
        isbn_t                     isbn_tP                    isbn_t_cjk
        issn_t                     issn_tP                    issn_t_cjk
        donor_s
        donor_t                    donor_tP                   donor_t_cjk
        pubplace_t                 pubplace_tP                pubplace_t_cjk
        eightninenine_t            eightninenine_tP           eightninenine_t_cjk
        notes_t                    notes_tP                   notes_t_cjk
        summary_t                  summary_tP                 summary_t_cjk
        toc_t                      toc_tP                     toc_t_cjk
        author_245c_t              author_245c_tP             author_245c_t_cjk
        barcode_t^10               barcode_tP^10
        barcode_addl_t             barcode_addl_tP
        language_articles_t
        authority_author_t         authority_author_tP        authority_author_t_cjk
        authority_subject_t        authority_subject_tP       authority_subject_t_cjk
      </str>
      <str name="pf">
        title_t^12500              title_tP^12500             title_t_cjk^2500
        title_exact^2500           title_main_exact^1250
        title_uniform_t^1250       title_uniform_tP^1250      title_uniform_t_cjk^250
        title_addl_t^1250          title_addl_tP^1250         title_addl_t_cjk^250
        subject_t^250              subject_tP^250             subject_t_cjk^50
        author_t^50                author_tP^50               author_t_cjk^10
        author_addl_t^25           author_addl_tP^25          author_addl_t_cjk^5
        lc_callnum_full^100
        publisher_t^50             publisher_tP^50            publisher_t_cjk^10
        pub_date_facet^25
        pub_date_t^25              pub_date_tP^25             pub_date_t_cjk^5
        subject_addl_t^25          subject_addl_tP^25         subject_addl_t_cjk^5
        title_series_t^5           title_series_t^5           title_series_t_cjk
        isbn_t                     isbn_tP                    isbn_t_cjk
        issn_t                     issn_tP                    issn_t_cjk
        donor_s
        donor_t                    donor_tP                   donor_t_cjk
        pubplace_t                 pubplace_tP                pubplace_t_cjk
        eightninenine_t            eightninenine_tP           eightninenine_t_cjk
        notes_t                    notes_tP                   notes_t_cjk
        summary_t                  summary_tP                 summary_t_cjk
        toc_t                      toc_tP                     toc_t_cjk
        author_245c_t              author_245c_tP             author_245c_t_cjk
        barcode_t^10               barcode_tP^10
        barcode_addl_t             barcode_addl_tP
        language_articles_t
        authority_author_t         authority_author_tP        authority_author_t_cjk
        authority_subject_t        authority_subject_tP       authority_subject_t_cjk
      </str>
    </lst>
  	<lst name="appends">
  	  <str name="fq">eightninenine_t:culdigreg</str>
  	</lst>
  </requestHandler>


  <!-- Searching ("All Fields") -->
  <requestHandler name="search" class="solr.SearchHandler" default="true" >
    <lst name="defaults">
      <str name="defType">edismax</str>
      <str name="echoParams">explicit</str>
      <str name="q.alt">*:*</str>
      <str name="mm">1</str>
      <str name="df">title_t</str>
      <str name="boost">log(max(10,sub(pub_date_facet,1987)))</str>
      <str name="qf">
        title_unstemC^25000        title_unstemP^25000
        title_startsCJK^2500
        title_t^12500              title_tP^12500             title_t_cjk^2500
        title_uniform_unstemC^2500 title_uniform_unstemP^2500
        title_uniform_t^1250       title_uniform_tP^1250      title_uniform_t_cjk^250
        title_addl_unstemC^2500    title_addl_unstemP^2500
        title_addl_t^1250          title_addl_tP^1250         title_addl_t_cjk^250
        subject_unstemC^375        subject_unstemP^375
        subject_t^250              subject_tP^250             subject_t_cjk^50
        author_unstemC^125         author_unstemP^125
        author_t^50                author_tP^50               author_t_cjk^10
        author_addl_unstemC^75     author_addl_unstemP^75
        author_addl_t^25           author_addl_tP^25          author_addl_t_cjk^5
        lc_callnum_full^100
        publisher_unstemC^75       publisher_unstemP^75
        publisher_t^50             publisher_tP^50            publisher_t_cjk^10
        pub_date_facet^25
        pub_date_t^25              pub_date_tP^25             pub_date_t_cjk^5
        subject_addl_unstemC^125   subject_addl_unstemP^125
        subject_addl_t^25          subject_addl_tP^25         subject_addl_t_cjk^5
        title_series_unstemC^25    title_series_unstemP^25
        title_series_t^5           title_series_t^5           title_series_t_cjk
        isbn_t                     isbn_tP                    isbn_t_cjk
        issn_t                     issn_tP                    issn_t_cjk
        donor_s
        donor_t                    donor_tP                   donor_t_cjk
        pubplace_t                 pubplace_tP                pubplace_t_cjk
        eightninenine_t            eightninenine_tP           eightninenine_t_cjk
        notes_t                    notes_tP                   notes_t_cjk
        summary_t                  summary_tP                 summary_t_cjk
        toc_t                      toc_tP                     toc_t_cjk
        author_245c_t              author_245c_tP             author_245c_t_cjk
        barcode_t^10               barcode_tP^10
        barcode_addl_t             barcode_addl_tP
        language_articles_t
        authority_author_t         authority_author_tP        authority_author_t_cjk
        authority_subject_t        authority_subject_tP       authority_subject_t_cjk
      </str>
      <str name="pf">
        title_unstemC^25000        title_unstemP^25000
        title_startsC^42000        title_startsP^42000        title_startsCJK^4200
        title_t^12500              title_tP^12500             title_t_cjk^2500
        title_exact^2500           title_main_exact^1800
        title_uniform_unstemC^2500 title_uniform_unstemP^2500
        title_uniform_startsC^2500 title_uniform_startsP^2500 title_uniform_startsCJK^250
        title_uniform_t^1250       title_uniform_tP^1250      title_uniform_t_cjk^250
        title_addl_unstemC^2500    title_addl_unstemP^2500
        title_addl_t^1250          title_addl_tP^1250         title_addl_t_cjk^250
        subject_unstemC^375        subject_unstemP^375
        subject_t^250              subject_tP^250             subject_t_cjk^50
        author_unstemC^125         author_unstemP^125
        author_t^50                author_tP^50               author_t_cjk^10
        author_addl_unstemC^75     author_addl_unstemP^75
        author_addl_t^25           author_addl_tP^25          author_addl_t_cjk^5
        lc_callnum_full^100
        publisher_unstemC^75       publisher_unstemP^75
        publisher_t^50             publisher_tP^50            publisher_t_cjk^10
        pub_date_facet^25
        pub_date_t^25              pub_date_tP^25             pub_date_t_cjk^5
        subject_addl_unstemC^125   subject_addl_unstemP^125
        subject_addl_t^25          subject_addl_tP^25         subject_addl_t_cjk^5
        title_series_unstemC^25    title_series_unstemP^25
        title_series_t^5           title_series_t^5           title_series_t_cjk
        isbn_t                     isbn_tP                    isbn_t_cjk
        issn_t                     issn_tP                    issn_t_cjk
        donor_s
        donor_t                    donor_tP                   donor_t_cjk
        pubplace_t                 pubplace_tP                pubplace_t_cjk
        eightninenine_t            eightninenine_tP           eightninenine_t_cjk
        notes_t                    notes_tP                   notes_t_cjk
        summary_t                  summary_tP                 summary_t_cjk
        toc_t                      toc_tP                     toc_t_cjk
        author_245c_t              author_245c_tP             author_245c_t_cjk
        barcode_t^10               barcode_tP^10
        barcode_addl_t             barcode_addl_tP
        language_articles_t
        authority_author_t         authority_author_tP        authority_author_t_cjk
        authority_subject_t        authority_subject_tP       authority_subject_t_cjk
      </str>
      <str name="f.phrase.qf">
        title_unstemC^25000        title_unstemP^25000
        title_exact^1000000        title_main_exact^400000
        title_leftboost_tC^100000  title_leftboost_tP^100000  title_startsCJK^2500
        title_t^12500              title_tP^12500             title_t_cjk^2500
        title_uniform_unstemC^2500 title_uniform_unstemP^2500
        title_uniform_t^1250       title_uniform_tP^1250      title_uniform_t_cjk^250
        title_addl_unstemC^2500    title_addl_unstemP^2500
        title_addl_t^1250          title_addl_tP^1250         title_addl_t_cjk^250
        subject_unstemC^375        subject_unstemP^375
        subject_t^250              subject_tP^250             subject_t_cjk^50
        author_unstemC^125         author_unstemP^125
        author_t^50                author_tP^50               author_t_cjk^10
        author_addl_unstemC^75     author_addl_unstemP^75
        author_addl_t^25           author_addl_tP^25          author_addl_t_cjk^5
        lc_callnum_full^100
        publisher_unstemC^75       publisher_unstemP^75
        publisher_t^50             publisher_tP^50            publisher_t_cjk^10
        pub_date_facet^25
        pub_date_t^25              pub_date_tP^25             pub_date_t_cjk^5
        subject_addl_unstemC^125   subject_addl_unstemP^125
        subject_addl_t^25          subject_addl_tP^25         subject_addl_t_cjk^5
        title_series_unstemC^25    title_series_unstemP^25
        title_series_t^5           title_series_t^5           title_series_t_cjk
        isbn_t                     isbn_tP                    isbn_t_cjk
        issn_t                     issn_tP                    issn_t_cjk
        donor_s
        donor_t                    donor_tP                   donor_t_cjk
        pubplace_t                 pubplace_tP                pubplace_t_cjk
        eightninenine_t            eightninenine_tP           eightninenine_t_cjk
        notes_t                    notes_tP                   notes_t_cjk
        summary_t                  summary_tP                 summary_t_cjk
        toc_t                      toc_tP                     toc_t_cjk
        author_245c_t              author_245c_tP             author_245c_t_cjk
        barcode_t^10               barcode_tP^10
        barcode_addl_t             barcode_addl_tP
        authority_author_t         authority_author_tP        authority_author_t_cjk
        authority_subject_t        authority_subject_tP       authority_subject_t_cjk
      </str>
      <str name="f.phrase.pf"> </str>
      <str name="f.starts.qf">
        title_startsC^25000        title_startsP^25000         title_startsCJK^2500
        title_uniform_startsC^2500 title_uniform_startsP^2500  title_uniform_startsCJK^250
        title_addl_startsC^2500    title_addl_startsP^2500     title_addl_startsCJK^250
        subject_startsC^375        subject_startsP^375         subject_startsCJK^50
        author_startsC^125         author_startsP^125          author_startsCJK^10
        author_addl_startsC^75     author_addl_startsP^75      author_addl_startsCJK^5
        lc_callnum_full^100
        publisher_startsC^75       publisher_startsP^75        publisher_startsCJK^10
        pub_date_facet^25
        pub_date_startsC^25        pub_date_startsP^25 pub_date_startsCJK^5 pub_date_t_startsNum^5
        subject_addl_startsC^125   subject_addl_startsP^125    subject_addl_startsCJK^5
        title_series_startsC^25    title_series_startsP^25     title_series_startsCJK
        isbn_startsC               isbn_startsP        isbn_startsCJK       isbn_startsNum
        issn_startsC               issn_startsP        issn_startsCJK       issn_startsNum
        donor_startsC              donor_startsP               donor_startsCJK
        pubplace_startsC           pubplace_startsP            pubplace_startsCJK
        eightninenine_startsC      eightninenine_startsP   eightninenine_startsNum
        notes_startsC              notes_startsP               notes_startsCJK
        summary_startsC            summary_startsP             summary_startsCJK
        toc_startsC                toc_startsP                 toc_startsCJK
        author_245c_startsC        author_245c_startsP         author_245c_startsCJK
        barcode_startsC            barcode_startsP         barcode_startsNum
        barcode_addl_startsC       barcode_addl_startsP    barcode_addl_startsNum
      </str>
      <str name="f.quoted.qf">
        title_unstemC^25000        title_unstemP^25000        title_t_cjk^2500
        title_exact^80000          title_main_exact^50000
        title_leftUnstemBoostC^30000 title_leftUnstemBoostP^30000
        title_uniform_unstemC^2500 title_uniform_unstemP^2500 title_uniform_t_cjk^250
        title_addl_unstemC^2500    title_addl_unstemP^2500    title_addl_t_cjk^250
        subject_unstemC^375        subject_unstemP^375        subject_t_cjk^50
        author_unstemC^125         author_unstemP^125         author_t_cjk^10
        author_addl_unstemC^75     author_addl_unstemP^75     author_addl_t_cjk^5
        lc_callnum_full^100
        publisher_unstemC^75       publisher_unstemP^75       publisher_t_cjk^10
        pub_date_facet^25
        pub_date_unstemC^25        pub_date_unstemP^25        pub_date_t_cjk^5
        subject_addl_unstemC^125   subject_addl_unstemP^125   subject_addl_t_cjk^5
        title_series_unstemC^25    title_series_unstemP^25    title_series_t_cjk
        isbn_unstemC               isbn_unstemP               isbn_t_cjk
        issn_unstemC               issn_unstemP               issn_t_cjk
        donor_s
        donor_unstemC              donor_unstemP              donor_t_cjk
        pubplace_unstemC           pubplace_unstemP           pubplace_t_cjk
        eightninenine_unstemC      eightninenine_unstemP      eightninenine_t_cjk
        notes_unstemC              notes_unstemP              notes_t_cjk
        summary_unstemC            summary_unstemP            summary_t_cjk
        toc_unstemC                toc_unstemP                toc_t_cjk
        author_245c_unstemC        author_245c_unstemP        author_245c_t_cjk
        barcode_unstemC^10         barcode_unstemP^10
        barcode_addl_unstemC       barcode_addl_unstemP
        authority_author_unstemC   authority_author_unstemP   authority_author_t_cjk
        authority_subject_unstemC  authority_subject_unstemP  authority_subject_t_cjk
      </str>

      <str name="f.author.qf">
        author_unstemC^125         author_unstemP^125
        author_addl_unstemC^75     author_addl_unstemP^75
        author_t^50                author_tP^50        author_t_cjk^10
        author_addl_t^25           author_addl_tP^25   author_addl_t_cjk^5
        author_245c_t              author_245c_tP      author_245c_t_cjk
        authority_author_t         authority_author_tP authority_author_t_cjk
     </str>
      <str name="f.author.pf">
        author_unstemC^125         author_unstemP^125
        author_addl_unstemC^75     author_addl_unstemP^75
        author_t^50                author_tP^50        author_t_cjk^10
        author_addl_t^25           author_addl_tP^25   author_addl_t_cjk^5
        author_245c_t              author_245c_tP      author_245c_t_cjk
        authority_author_t         authority_author_tP authority_author_t_cjk
      </str>
      <str name="f.author_starts.qf">
        author_startsC^125         author_startsP^125        author_startsCJK^10
        author_addl_startsC^75     author_addl_startsP^75    author_addl_startsCJK^5
        author_245c_startsC        author_245c_startsP       author_245c_startsCJK
      </str>
      <str name="f.author_cts.qf"> author_pers_browse author_corp_browse author_event_browse </str>
      <str name="f.author_quoted.qf">
        author_unstemC^125         author_unstemP^125        author_t_cjk^10
        author_addl_unstemC^75     author_addl_unstemP^75    author_addl_t_cjk^5
        author_245c_unstemC        author_245c_unstemP       author_245c_t_cjk
        authority_author_unstemC   authority_author_unstemP  authority_author_t_cjk
      </str>

      <str name="f.title.qf">
        title_t^125                title_tP^125             title_t_cjk^25
        title_unstemC^250          title_unstemP^250
        title_startsCJK^25
        title_uniform_t^12         title_uniform_tP^12      title_uniform_t_cjk^3
        title_uniform_unstemC^25   title_uniform_unstemP^25
        title_addl_t^12            title_addl_tP^12         title_addl_t_cjk^3
        title_addl_unstemC^25      title_addl_unstemP^25
        title_series_t             title_series_t           title_series_t_cjk   
        title_series_unstemC^3     title_series_unstemP^3
        language_articles_t
      </str>
      <str name="f.title.pf">
        title_t^125                title_tP^125             title_t_cjk^25
        title_unstemC^250          title_unstemP^250
        title_startsCJK^25
        title_exact^500            title_main_exact^300
        title_uniform_t^12         title_uniform_tP^12      title_uniform_t_cjk^3
        title_uniform_unstemC^25   title_uniform_unstemP^25
        title_addl_t^12            title_addl_tP^12         title_addl_t_cjk^3
        title_addl_unstemC^25      title_addl_unstemP^25
        title_series_t             title_series_t           title_series_t_cjk   
        title_series_unstemC^3     title_series_unstemP^3
        language_articles_t
      </str>
      <str name="f.title_phrase.qf">
        title_t^125                title_tP^125             title_t_cjk^25
        title_unstemC^250          title_unstemP^250
        title_exact^10000          title_main_exact^4000
        title_leftboost_tC^1000    title_leftboost_tP^1000  title_startsCJK^50
        title_uniform_t^12         title_uniform_tP^12      title_uniform_t_cjk^3
        title_uniform_unstemC^25   title_uniform_unstemP^25
        title_addl_t^12            title_addl_tP^12         title_addl_t_cjk^3
        title_addl_unstemC^25      title_addl_unstemP^25
        title_series_t             title_series_t           title_series_t_cjk   
        title_series_unstemC^3     title_series_unstemP^3
      </str>
      <str name="f.title_starts.qf">
        title_startsC^250          title_startsP^250        title_startsCJK^25
        title_uniform_startsC^25   title_uniform_startsP^25 title_uniform_startsCJK^3
        title_addl_startsC^25      title_addl_startsP^25    title_addl_startsCJK^3
        title_series_startsC^3     title_series_startsP^3   title_series_startsCJK
      </str>
      <str name="f.title_quoted.qf">
        title_exact^800            title_main_exact^400
        title_leftUnstemBoostC^300 title_leftUnstemBoostP^300
        title_unstemC^250          title_unstemP^250        title_t_cjk^25
        title_uniform_unstemC^25   title_uniform_unstemP^25 title_uniform_t_cjk^3
        title_addl_unstemC^25      title_addl_unstemP^25    title_addl_t_cjk^3
        title_series_unstemC^3     title_series_unstemP^3   title_series_t_cjk   
      </str>

      <str name="f.subject.qf">
        subject_unstemC^200        subject_unstemP^200
        subject_t^25               subject_tP^25        subject_t_cjk^5
        subject_addl_unstemC^50    subject_addl_unstemP^50
        subject_addl_t             subject_addl_tP      subject_addl_t_cjk
        authority_subject_t        authority_subject_tP authority_subject_t_cjk
      </str>
      <str name="f.subject.pf">
        subject_unstemC^200        subject_unstemP^200
        subject_t^25               subject_tP^25        subject_t_cjk^5
        subject_addl_unstemC^50    subject_addl_unstemP^50
        subject_addl_t             subject_addl_tP      subject_addl_t_cjk
        authority_subject_t        authority_subject_tP authority_subject_t_cjk
      </str>
      <str name="f.subject_starts.qf">
        subject_startsC^200        subject_startsP^200        subject_startsCJK^5
        subject_addl_startsC^50    subject_addl_startsP^50    subject_addl_startsCJK
      </str>
      <str name="f.subject_cts.qf">
        subject_pers_browse
        subject_corp_browse
        subject_event_browse
        subject_gen_browse
        subject_topic_browse
        subject_geo_browse
        subject_era_browse
        subject_genr_browse
        subject_work_browse
      </str>
      <str name="f.subject_quoted.qf">
        subject_unstemC^200        subject_unstemP^200        subject_t_cjk^5
        subject_addl_unstemC^50    subject_addl_unstemP^50    subject_addl_t_cjk
        authority_subject_unstemC  authority_subject_unstemP  authority_subject_t_cjk
      </str>

      <str name="f.publisher.qf">
        publisher_unstemC^10       publisher_unstemP^10
        publisher_t                publisher_tP        publisher_t_cjk
      </str>
      <str name="f.publisher.pf">
        publisher_unstemC^10       publisher_unstemP^10
        publisher_t                publisher_tP        publisher_t_cjk
      </str>
      <str name="f.publisher_starts.qf">publisher_startsC^10 publisher_startsP^10 publisher_startsCJK</str>
      <str name="f.publisher_quoted.qf">publisher_unstemC^10 publisher_unstemP^10 publisher_t_cjk</str>

      <str name="f.pubplace.qf"> pubplace_t  pubplace_tP  pubplace_t_cjk </str>
      <str name="f.pubplace.pf"> pubplace_t  pubplace_tP  pubplace_t_cjk </str>
      <str name="f.pubplace_starts.qf"> pubplace_startsC pubplace_startsP pubplace_startsCJK </str>
      <str name="f.pubplace_quoted.qf"> pubplace_unstemC pubplace_unstemP pubplace_t_cjk </str>
      
      <str name="f.lc_callnum.qf"> lc_callnum_full lc_callnum_suffix </str>
      <str name="f.lc_callnum.pf"></str>
      <str name="f.lc_callnum_starts.qf"> lc_callnum_full lc_callnum_suffix </str>

      <str name="f.donor.qf"> donor_s donor_t donor_tP donor_t_cjk </str>
      <str name="f.donor.pf"> donor_s donor_t donor_tP donor_t_cjk </str>
      <str name="f.donor_starts.qf"> donor_startsC donor_startsP donor_startsCJK </str>
      <str name="f.donor_quoted.qf"> donor_s donor_unstemC donor_unstemP donor_t_cjk </str>

      <str name="f.isbnissn.qf">
        isbn_t   isbn_tP   isbn_t_cjk
        issn_t   issn_tP   issn_t_cjk
      </str>
      <str name="f.isbnissn.pf">
        isbn_t   isbn_tP   isbn_t_cjk
        issn_t   issn_tP   issn_t_cjk
      </str>
      <str name="f.isbnissn_starts.qf">
        isbn_startsC   isbn_startsP   isbn_startsCJK   isbn_startsNum
        issn_startsC   issn_startsP   issn_startsCJK   issn_startsNum
      </str>
      <str name="f.isbnissn_quoted.qf">
        isbn_unstemC   isbn_unstemP   isbn_t_cjk
        issn_unstemC   issn_unstemP   issn_t_cjk
      </str>

      <str name="f.number.qf">
        id_t             id_tP                   id_t_cjk
        id
        eightninenine_t  eightninenine_tP        eightninenine_t_cjk
        barcode_t^10     barcode_tP^10
        barcode_addl_t   barcode_addl_tP
      </str>
      <str name="f.number.pf">
        id_t             id_tP                   id_t_cjk
        id
        eightninenine_t  eightninenine_tP        eightninenine_t_cjk
        barcode_t^10     barcode_tP^10
        barcode_addl_t   barcode_addl_tP
      </str>
      <str name="f.number_phrase.qf">
        id_t             id_tP                   id_t_cjk
        id               id_left_chunked
        eightninenine_t  eightninenine_tP        eightninenine_t_cjk
        barcode_t^10     barcode_tP^10
        barcode_addl_t   barcode_addl_tP
      </str>
      <str name="f.number_starts.qf">
      	id_startsNum
        eightninenine_startsC      eightninenine_startsP   eightninenine_startsNum
        barcode_startsC            barcode_startsP         barcode_startsNum
        barcode_addl_startsC       barcode_addl_startsP    barcode_addl_startsNum
      </str>
      <str name="f.number_quoted.qf">
        id_unstemC             id_unstemP              id_t_cjk
        id
        eightninenine_unstemC  eightninenine_unstemP   eightninenine_t_cjk
        barcode_unstemC^10     barcode_unstemP^10
        barcode_addl_unstemC   barcode_addl_unstemP
      </str>

      <str name="f.series.qf">
        title_series_unstemC^25    title_series_unstemP^25
        title_series_t^5           title_series_t^5        title_series_t_cjk
      </str>
      <str name="f.series.pf">
        title_series_unstemC^25    title_series_unstemP^25
        title_series_t^5           title_series_t^5        title_series_t_cjk
      </str>
      <str name="f.series_starts.qf">title_series_startsC^25 title_series_startsP^25 title_series_startsCJK</str>
      <str name="f.series_quoted.qf"> title_series_unstemC^25 title_series_unstemP^25 title_series_t_cjk</str>

 	  <str name="f.notes_qf.qf">notes_t notes_tP notes_t_cjk</str>
 	  <str name="f.notes_qf.pf">notes_t notes_tP notes_t_cjk</str>
 	  <str name="f.notes_starts.qf">notes_startsC notes_startsP notes_startsCJK</str>
 	  <str name="f.notes_quoted.qf">notes_unstemC notes_unstemP notes_t_cjk</str>

      <int name="ps">2</int>
      <float name="tie">0.01</float>

      <str name="fl">
        id, 
        score,
        title_display,
        subtitle_display,
        fulltitle_display,
        fulltitle_vern_display,
        author_display,
        format, 
        online, 
        language_display, 
        pub_info_display,
	pub_date_display,
        pub_date_facet,
	url_access_display,
	url_access_json,
    	holdings_record_display,
	item_record_display,
	edition_display,
	title_uniform_display,
	oclc_id_display,
	availability_json,
	acquired_dt
      </str>
     
      <str name="facet">true</str>
      <str name="facet.mincount">1</str>
      <str name="facet.limit">10</str>
      <str name="facet.field">format</str>
      <str name="facet.field">online</str>
      <str name="facet.field">language_facet</str>
      <str name="facet.field">location_facet</str>
    </lst>
    <lst name="appends">
      <str name="fq">type:Catalog</str>
    </lst>
    <arr name="last-components">
      <str>spellcheck</str>
    </arr>
    
  </requestHandler>
  
  <!-- for requests to get a single document; use id=666 instead of q=id:666 -->
  <requestHandler name="document" class="solr.SearchHandler" >
    <lst name="defaults">
      <str name="echoParams">all</str>
      <str name="fl">*</str>
      <str name="rows">1</str>
      <str name="q">{!raw f=id v=$id}</str> <!-- use id=666 instead of q=id:666 -->
    </lst>
  </requestHandler>
  
  <!-- for docfreq term counts -->
  <searchComponent name="terms" class="solr.TermsComponent"/>  
  <requestHandler name="/terms" class="solr.SearchHandler" startup="lazy">
  <lst name="defaults">
    <bool name="terms">true</bool>
    <bool name="distrib">false</bool>
    <str name="terms.sort">index</str>
    <!-- We are using this handler to support building the headings index, and though
         the terms.limit=100000000 value is always set at query time, setting it here is
         likely to cause accidental effects -->
  </lst>
  <arr name="components">
    <str>terms</str>
  </arr>
  </requestHandler>

  <searchComponent name="spellcheck" class="solr.SpellCheckComponent">
    <str name="queryAnalyzerFieldType">textSpell</str>
    <lst name="spellchecker">
      <str name="name">default</str>
      <str name="field">spell</str>
      <str name="spellcheckIndexDir">./spell</str>
      <str name="buildOnOptimize">true</str>
    </lst>
    <lst name="spellchecker">
      <str name="name">author</str>
      <str name="field">author_spell</str>
      <str name="spellcheckIndexDir">./spell_author</str>
      <str name="accuracy">0.7</str>
      <str name="buildOnOptimize">true</str>
    </lst>
    <lst name="spellchecker">
      <str name="name">subject</str>
      <str name="field">subject_spell</str>
      <str name="spellcheckIndexDir">./spell_subject</str>
      <str name="accuracy">0.7</str>
      <str name="buildOnOptimize">true</str>
    </lst>
    <lst name="spellchecker">
      <str name="name">title</str>
      <str name="field">title_spell</str>
      <str name="spellcheckIndexDir">./spell_title</str>
      <str name="accuracy">0.7</str>
      <str name="buildOnOptimize">true</str>
    </lst>
  </searchComponent>

 </config>
